# Smithery configuration file: https://smithery.ai/docs/deployments

build:
  dockerBuildPath: .

startCommand:
  type: stdio
  configSchema:
    type: object
    required:
      - OPENAI_API_KEY
    properties:
      OPENAI_API_KEY:
        type: string
        description: "OpenAI API key for LLM interactions"
      GOOGLE_OAUTH_CLIENT_ID:
        type: string
        description: "Google OAuth Client ID for Google API authentication"
      GOOGLE_OAUTH_CLIENT_SECRET:
        type: string
        description: "Google OAuth Client Secret for Google API authentication"
      GOOGLE_OAUTH_REFRESH_TOKEN:
        type: string
        description: "Google OAuth refresh token for automated authentication"
  commandFunction: |
    (config) => ({
      command: 'python',
      args: ['-m', 'pragweb.mcp_server'],
      env: {
        OPENAI_API_KEY: config.OPENAI_API_KEY,
        GOOGLE_OAUTH_CLIENT_ID: config.GOOGLE_OAUTH_CLIENT_ID || '',
        GOOGLE_OAUTH_CLIENT_SECRET: config.GOOGLE_OAUTH_CLIENT_SECRET || '',
        GOOGLE_OAUTH_REFRESH_TOKEN: config.GOOGLE_OAUTH_REFRESH_TOKEN || '',
        PYTHONUNBUFFERED: '1'
      }
    })